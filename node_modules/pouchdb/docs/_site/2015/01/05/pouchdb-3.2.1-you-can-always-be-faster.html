<!DOCTYPE html>
<html lang="en" manifest="/manifest.appcache">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PouchDB 3.2.1&#58; You can always be faster</title>
    <link rel="alternate" title="PouchDB, the JavaScript Database that Syncs!" type="application/rss+xml" href="/feed.xml">
    <link rel="stylesheet" href="/static/css/pouchdb.css" />
    <meta name="theme-color" content="#6ccb99">
    <meta name="msapplication-TileColor" content="#6ccb99">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-42479701-1']);
      _gaq.push(['_trackPageview']);

      (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <link href='http://fonts.googleapis.com/css?family=Lato:400,700|Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon"/>
  </head>

  <body data-spy="scroll" data-target="#sidebar">

    <header>

      <a href="https://github.com/pouchdb/pouchdb" target="_blank">
         <div class="ribbon">GitHub</div>
      </a>

      <div class="container">

        <a class="logo" href="/">
          <div class="logo-img"></div>
          <span class='logo-type'>PouchDB</span>
        </a>

        <ul class='nav nav-header nav-pills'>
          <li>
            <a class='btn btn-link btn-lg' href="/blog/">Blog</a>
          </li>
          <li>
            <a class='btn btn-link btn-lg' href="/guides/">Guides</a>
          </li>
          <li>
            <a class='btn btn-link btn-lg' href="/api.html">API</a>
          </li>
          <li>
            <a class='btn btn-link btn-lg' href="/learn.html">Learn</a>
          </li>
          <li>
            <a
                class='btn btn-primary btn-lg'
                href="https://github.com/pouchdb/pouchdb/releases/download/3.5.0/pouchdb-3.5.0.min.js"
            >
                Download <strong>v3.5.0</strong>
            </a>
          </li>
        </ul>

      </div>

    </header>
    
      <div class="page-head">

        <div class="container">

          <h1>PouchDB 3.2.1&#58; You can always be faster</h1>
          

        </div>

      </div>
    


    <article class='container'>
  <div class='row'>
    <div class='col-md-offset-1 col-md-10'>
      
  







  

  
    
      
    
    
      
    
  

  

  

  




<div class="post">
  <div class="media">
    <a class="pull-left" href="#">
    <img class="media-object img-circle img-responsive" src='https://gravatar.com/avatar/c436dec61b906e27c963518d0ef1d972' alt='Nolan Lawson'>
    </a>
    <div class="media-body">
    <p>
      <strong>By:</strong> <a href="https://twitter.com/nolanlawson">Nolan Lawson</a><br>
      <strong>Published:</strong> 05 January 2015<br>
      
    </p>
    </div>
  </div>
</div>


      <p>A humble release to ring in the new year, PouchDB 3.2.1 is focused on bugfixes and performance improvements. In particular, 3.2.1 boasts some critical fixes for IE11 and node-webkit, as well as a fix for replication of conflicted documents.</p>

<div class="alert alert-warning">


<div class="alert-text">

This release contains a database migration, which means that once you upgrade you will no longer be able to use previous versions of PouchDB on the same databases.
</div></div>

<h3>Gotta go fast</h3>

<p>For performance, the biggest gains will be seen in secondary indexes and auto-compaction. Auto-compaction now occurs in the same transaction as <code>bulkDocs</code>, which speeds up the build time for secondary indexes (since they use auto-compaction under the hood). This also means that <a href="https://github.com/nolanlawson/pouchdb-quick-search">pouchdb-quick-search</a> will be faster.</p>

<p>In addition, the LevelDB adapter now makes all its <code>bulkDocs</code> writes inside a single <code>batch</code> operation. This means that PouchDB can now provide the same consistency guarantees in both Node.js and the browser, since the LevelDB adapter is using the same transactional model as IndexedDB and WebSQL. Also, using a single <code>batch</code> boosts the write performance of LevelDB.</p>

<p>A performance comparison between 3.2.0 and 3.2.1 can be found in <a href="https://gist.github.com/nolanlawson/bc6fd6240db820a36a49">this report</a>. The build times for secondary indexes have been reduced by 37%-57%, depending on the browser and environment.</p>

<h3>CouchDB 2.0 is coming</h3>

<p>A big shout-out this release goes to <a href="https://github.com/willholley">Will Holley</a>, who has been tirelessly fixing bugs in the PouchDB test suite so that it can pass against CouchDB master. Not only does this improve PouchDB&#39;s test coverage against Cloudant, but it also better prepares us for the (soonish!) release of CouchDB 2.0. Thanks, Will!</p>

<h3>PouchDB Server is getting awesome</h3>

<p>And if you haven&#39;t checked out <a href="https://github.com/pouchdb/pouchdb-server/">PouchDB Server</a> or <a href="https://github.com/pouchdb/express-pouchdb">express-pouchdb</a> recently, you&#39;ll be pleased to see that <a href="https://github.com/marten-de-vries">Marten de Vries</a> has made a ton of improvements over there, including cleaner configuration via <code>config.json</code>, authentication support, a <code>--proxy</code> option, CouchDB-style logging, &quot;modes&quot; to choose different CouchDB server features, and more. Just <code>$ npm install -g pouchdb-server &amp;&amp; pouchdb-server</code> to try it out!</p>

<h3>Full changelog:</h3>

<h4>Bugfixes</h4>

<ul>
<li><code>leveldown</code> is now an optional dependency in Node.js due to build issues with Windows (<a href="https://github.com/pouchdb/pouchdb/issues/3113">#3113</a>)</li>
<li>Avoid call stack exceeded errors in the merge algorithm (<a href="https://github.com/pouchdb/pouchdb/issues/2543">#2543</a>)</li>
<li>Properly destroy MemDOWN-based databases (<a href="https://github.com/pouchdb/pouchdb/issues/3144">#3144</a>)</li>
<li>Avoid &quot;too many listeners&quot; errors in <code>changes()</code> (<a href="https://github.com/pouchdb/pouchdb/issues/2867">#2867</a>)</li>
<li>Non-winning conflicts properly replicated (<a href="https://github.com/pouchdb/pouchdb/issues/3136">#3136</a>)</li>
<li>Fixes for node-webkit (<a href="https://github.com/pouchdb/pouchdb/issues/3229">#3229</a>)</li>
<li>LevelDB uses a read queue to prevent database corruption (<a href="https://github.com/pouchdb/pouchdb/issues/3251">#3251</a>)</li>
<li>Can build and test on Windows (<a href="https://github.com/pouchdb/pouchdb/issues/2143">#2143</a>)</li>
<li>Avoid http header error in IE11 (<a href="https://github.com/pouchdb/pouchdb/issues/3278">#3278</a>)</li>
<li>Blobs are stored more efficiently in Chrome 38+ (<a href="https://github.com/pouchdb/pouchdb/issues/3326">#3326</a> <a href="https://github.com/pouchdb/pouchdb/issues/3325">#3325</a>)</li>
<li>Many fixes to the test suite to better support CouchDB master (<a href="https://github.com/pouchdb/pouchdb/issues/136">#136</a>)</li>
<li>Fix replication when <code>skipSetup</code> is true (<a href="https://github.com/pouchdb/pouchdb/issues/2915">#2915</a>)</li>
<li>Fixes for webpack (<a href="https://github.com/pouchdb/pouchdb/issues/3287">#3287</a>)</li>
<li><code>auto_compaction</code> is correctly reported in <code>info()</code> (<a href="https://github.com/pouchdb/pouchdb/issues/3345">#3345</a>)</li>
</ul>

<h4>Performance improvements</h4>

<ul>
<li>Replication doesn&#39;t make unnecessary <code>allDocs()</code> calls (<a href="https://github.com/pouchdb/pouchdb/issues/3153">#3153</a>)</li>
<li>Replication GET requests issued in parallel (<a href="https://github.com/pouchdb/pouchdb/issues/3015">#3015</a>)</li>
<li>Auto-compaction occurs in same transaction as writes (<a href="https://github.com/pouchdb/pouchdb/issues/3089">#3089</a>)</li>
<li>Formal one-time IndexedDB migration, cleaner schema (<a href="https://github.com/pouchdb/pouchdb/issues/3211">#3211</a>, <a href="https://github.com/pouchdb/pouchdb/issues/3182">#3182</a>)</li>
<li>IndexedDB doesn&#39;t store duplicated id/rev (<a href="https://github.com/pouchdb/pouchdb/issues/3213">#3213</a>)</li>
<li>Fall back from JSON to vuvuzela to improve parse/stringify (<a href="https://github.com/pouchdb/pouchdb/issues/3188">#3188</a>)</li>
<li>LevelDB makes changes in a single batch (<a href="https://github.com/pouchdb/pouchdb/issues/1738">#1738</a>)</li>
</ul>

<h3>Get in touch</h3>

<p>Please <a href="https://github.com/pouchdb/pouchdb/issues">file issues</a> or <a href="https://github.com/pouchdb/pouchdb/blob/master/CONTRIBUTING.md#get-in-touch">tell us what you think</a>. And as always, a big thanks to all of our <a href="https://github.com/pouchdb/pouchdb/graphs/contributors">new and existing contributors</a>!</p>

        </div>
  </div>
</article>


    <div class="icons">

      <div class="container">

        <div class="row">

          <div class='col-xs-4 col-md-offset-0 col-md-2'>
            <a href='https://twitter.com/pouchdb' target='_blank'>
              <div class="icon icon-twitter"></div>
            </a>
          </div>

          <div class='col-xs-4 col-md-2'>
            <a href='https://github.com/rvagg/node-levelup' target='_blank'>
              <div class="icon icon-leveldb"></div>
            </a>
          </div>

          <div class='col-xs-4 col-md-2'>
            <a href='https://github.com/pouchdb/pouchdb' target='_blank'>
              <div class="icon icon-github"></div>
            </a>
            </div>

          <div class='col-xs-4 col-md-offset-0 col-md-2'>
            <a href='https://travis-ci.org/pouchdb/pouchdb' target='_blank'>
              <div class="icon icon-travis"></div>
            </a>
          </div>

          <div class='col-xs-4 col-md-2'>
            <a href='http://couchdb.apache.org/' target='_blank'>
              <div class="icon icon-couchdb"></div>
            </a>
          </div>

          <div class='col-xs-4 col-md-2'>
            <a href='https://saucelabs.com' target='_blank'>
              <div class="icon icon-saucelabs"></div>
            </a>
          </div>

        </div>

      </div>

    </div>

    <footer class="footer">

      <div class="container">

        <div class="row">

          <div class='col-sm-3'>
            <h3 class="nav-head">Learn</h3>
            <ul class='nav nav-silent'>
              <li><a href="/getting-started.html">Getting Started</a></li>
              <li><a href="/api.html">API Guide</a></li>
              <li><a href="https://github.com/pouchdb/pouchdb/wiki">Wiki</a></li>
            </ul>
          </div>

          <div class='col-sm-3'>
            <h3 class="nav-head">Discuss</h3>
            <ul class='nav nav-silent'>
              <li><a href="https://groups.google.com/forum/#!forum/pouchdb">Mailing List</a></li>
              <li><a href="irc://freenode.net/#pouchdb">IRC</a></li>
              <li><a href="http://twitter.com/pouchdb">Twitter</a></li>
              <li><a href="http://stackoverflow.com/questions/tagged/pouchdb">StackOverflow</a></li>
            </ul>
          </div>

          <div class='col-sm-3'>
            <h3 class="nav-head">Contribute</h3>
            <ul class='nav nav-silent'>
              <li><a href="https://github.com/pouchdb/pouchdb/blob/master/CONTRIBUTING.md">Contributing</a></li>
              <li><a href="https://github.com/pouchdb/pouchdb">Source</a></li>
              <li><a href="https://github.com/pouchdb/pouchdb/issues">Issues</a></li>
              <li><a href="https://github.com/pouchdb/pouchdb/blob/master/LICENSE">Apache License</a></li>
            </ul>
          </div>

        </div>

      </div>

    </footer>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/static/js/code.min.js"></script>
    <script type="text/javascript" src="http://cdn.jsdelivr.net/pouchdb/latest/pouchdb.min.js"></script>
    <script type="text/javascript">
      function onCached(e) {
        if (applicationCache.status === 1) {
          giveIntro();
        }
      }
      
      function giveIntro() {
        console.log('%c\n..............................................................................\n.?I...........~+: ............................................................\n.???.........++++.............................................................\n:????+......+++++.............................................................\n.??????+++++++++:.................................H...........D..B............\n...????++++++++...................................H...........D..B............\n...=????++++++.......PPPPP...OOOO...U....U...CCCC.HHHHH...DDDDD..BBBBB........\n...?????+++++++......P...:P.OO...O..U....U..C.....H...H..D....D..B....B.......\n..???????+++++++ ....P. ..P.O....O..U....U.CC.....H...H..D....D..B....B.......\n..?????????????......P...:P.OO...O..U....U..C.....H...H..D....D..B....B.......\n...I??????????~......PPPPP...OOOO...=UUUUU...CCCC.H...H...DDDDD..BBBBB........\n....?????????~.......P.... ...................................................\n.....???????+........P........................................................\n......??????..................................................................\n..............................................................................\n..............................................................................\n..............................................................................', 'color: #4ec084');
        console.log('%c\nPouchDB itself is hosted at PouchDB.com!\nTo get started, try typing:\nvar db = new PouchDB(\'mydb\');', 'color: #4ec084');
      }
      applicationCache.addEventListener('cached', onCached, false);
      applicationCache.addEventListener('noupdate', giveIntro, false);
    </script>
  </body>
</html>
